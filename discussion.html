<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Обсуждение - Pepsora</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --black: #0a0a0a;
            --dark-gray: #121212;
            --light-gray: #2a2a2a;
            --white: #ffffff;
            --accent-green: #007B42;
            --hover-green: #009952;
            --bright-accent: #00FF88;
            --secondary-accent: #00D1A0;
            --tertiary-accent: #00B388;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        body {
            background-color: var(--black);
            color: var(--white);
            overflow-x: hidden;
            position: relative;
        }
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 3;
        }
        /* Header Styles */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        /* Стили для логотипа и иконки */
.logo-container {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
}
.logo-icon {
    width: 49px; /* Установите желаемую ширину */
    height: 49px; /* Установите желаемую высоту */
    /* Убираем color, так как это изображение */
    transition: all 0.3s ease;
    /* Добавляем стили для изображения */
    display: block;
    object-fit: contain; /* Обеспечивает масштабирование без обрезки */
}
.logo-container:hover .logo-icon {
    /* Убираем изменение цвета, так как это изображение */
    transform: scale(1.1);
}
.logo {
    font-size: 28px;
    font-weight: 800;
    color: var(--white);
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    transition: all 0.3s ease;
}
.logo:hover {
    transform: scale(1.05);
    text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
}
        /* Стили для бургер-меню */
        .burger-menu {
            display: none;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 30px;
            cursor: pointer;
            z-index: 1001;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        .burger-menu:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .burger-line {
            width: 100%;
            height: 3px;
            background-color: var(--white);
            border-radius: 3px;
            transition: all 0.3s ease;
            transform-origin: center;
        }
        /* Стили для навигационных кнопок */
        .nav-links {
            display: flex;
            gap: 20px;
        }
        .nav-button {
            background: none;
            border: none;
            color: var(--white);
            font-weight: 500;
            font-size: 16px;
            padding: 5px 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            color: var(--bright-accent);
            background: rgba(0, 255, 136, 0.1);
        }
        .nav-button.active {
            color: var(--bright-accent);
            background: rgba(0, 255, 136, 0.1);
        }
        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-green), var(--bright-accent));
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }
        .user-avatar:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
        }
        .avatar-initial {
            color: var(--white);
            font-weight: 700;
            font-size: 18px;
        }
        .login-btn {
    background: rgba(255, 255, 255, 0.1);
    color: var(--white);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    padding: 8px 16px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}
.login-btn:hover {
    background: rgba(0, 255, 136, 0.1);
    color: var(--bright-accent);
    border-color: var(--bright-accent);
}
/* Стили для аватарки автора статьи */
.author-info {
    display: flex;
    align-items: center;
    gap: 6px;
    position: absolute;
    bottom: 20px;
    right: 20px;
    z-index: 2;
}
.author-avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-green), var(--bright-accent));
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 8px rgba(0, 255, 136, 0.3);
}
.author-avatar:hover {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 0 12px rgba(0, 255, 136, 0.5);
}
.author-initial {
    color: var(--white);
    font-weight: 700;
    font-size: 12px;
}
.author-name {
    color: var(--white);
    font-weight: 500;
    font-size: 0.9rem;
    cursor: default;
}
.author-name:hover {
    color: var(--bright-accent);
}
/* Модальное окно профиля пользователя */
.profile-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}
.profile-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}
.profile-modal {
    background: var(--dark-gray);
    border-radius: 15px;
    padding: 30px;
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    position: relative;
}
.profile-modal-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.profile-modal-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-green), var(--bright-accent));
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
}
.profile-modal-initial {
    color: var(--white);
    font-weight: 700;
    font-size: 24px;
}
.profile-modal-title {
    color: var(--white);
    font-size: 1.5rem;
    font-weight: 700;
}
.profile-modal-content {
    color: var(--white);
    line-height: 1.8;
    margin-bottom: 20px;
}
.profile-modal-info {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.profile-modal-info h4 {
    color: var(--bright-accent);
    font-size: 1.1rem;
    margin-bottom: 10px;
    font-weight: 600;
}
.profile-modal-info p {
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 8px;
    font-size: 1rem;
}
.profile-modal-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 15px;
    margin-top: 25px;
}
.profile-stat {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 12px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.profile-stat-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--bright-accent);
    margin-bottom: 5px;
}
.profile-stat-label {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
    font-weight: 500;
}
.profile-modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: var(--white);
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}
.profile-modal-close:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg);
}
        /* Main Content */
        main {
            margin-top: 100px;
            padding: 40px 0;
        }
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 40px;
            text-align: center;
            background: linear-gradient(90deg, var(--white) 0%, var(--bright-accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        /* Article Editor */
        .editor-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 60px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        .editor-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 30px;
            color: var(--white);
        }
        .editor-form {
            max-width: 800px;
            margin: 0 auto;
        }
        /* Исправил выбор категорий - теперь текст виден */
        .category-select {
            width: 100%;
            padding: 15px 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--white); /* Явно указал белый цвет текста */
            font-size: 1rem;
            margin-bottom: 25px;
            cursor: pointer;
            appearance: none;
            background-image: url("image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23ffffff' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 15px;
        }
        /* Добавил стили для выпадающего списка */
        .category-select option {
            background: var(--dark-gray); /* Темный фон для опций */
            color: var(--white); /* Белый текст для опций */
        }
        .category-select:focus {
            outline: none;
            border-color: var(--bright-accent);
            box-shadow: 0 0 0 3px rgba(0, 255, 136, 0.3);
        }
        .title-input {
            width: 100%;
            padding: 15px 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--white);
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 25px;
        }
        .hashtags-input {
            width: 100%;
            padding: 15px 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--white);
            font-size: 1rem;
            margin-bottom: 25px;
        }
        .content-editor {
            width: 100%;
            min-height: 300px;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--white);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 25px;
            resize: vertical;
        }
        /* Исправил загрузку изображений */
        .image-preview-item {
    position: relative;
    width: 100px;
    height: 100px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.image-preview-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.remove-image-btn {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #ff4444;
    color: white;
    border: none;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.4);
    padding: 0;
}
        .image-upload {
            margin-bottom: 25px;
            padding: 20px;
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.03);
            position: relative;
        }
        .image-upload:hover {
            border-color: var(--bright-accent);
            background: rgba(0, 255, 136, 0.05);
        }
        .image-upload p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
        }
        /* Скрытый input для загрузки файлов */
        #imageInput {
            display: none;
        }
        .preview-image {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }
       /* Editor Buttons */
.editor-buttons {
    display: flex;
    gap: 20px;
    justify-content: flex-end;
    margin-top: 30px;
}
.draft-btn {
    padding: 12px 30px;
    background: var(--dark-gray);
    color: var(--white);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
}
.draft-btn:hover {
    background: rgba(0, 255, 136, 0.1);
    border-color: var(--bright-accent);
}
.filter-btn {
    padding: 10px 20px;
    background: rgba(255, 255, 255, 0.05);
    color: var(--white);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}
.filter-btn.active {
    background: var(--accent-green);
    border-color: var(--accent-green);
}
        /* Articles Management */
        .articles-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 60px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        .articles-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 30px;
            color: var(--white);
        }
        .filters {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .filter-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--white);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .filter-btn.active {
            background: var(--accent-green);
            border-color: var(--accent-green);
        }
        .filter-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
        }
        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }
        .article-actions {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 15px;
}
        .article-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }
        .article-card:hover {
            transform: translateY(-5px);
            border-color: var(--bright-accent);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        .article-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 15px;
        }
        .status-published {
            background: rgba(0, 255, 136, 0.2);
            color: var(--bright-accent);
        }
        .status-draft {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }
        .article-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--white);
        }
        .article-category {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        .article-hashtags {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
            margin-bottom: 15px;
        }

.edit-btn, .publish-btn {
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.3);
}
.edit-btn {
    background: rgba(0, 255, 136, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 6px;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0;
}
.edit-btn:hover {
    background: rgba(0, 255, 136, 0.2);
    transform: translateY(-1px);
}
.edit-btn svg {
    width: 18px;
    height: 18px;
    fill: var(--bright-accent);
}
.publish-btn {
    padding: 12px 30px;
    background: linear-gradient(135deg, var(--accent-green), var(--bright-accent));
    color: var(--white);
    border: none;
    border-radius: 12px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 123, 66, 0.3);
}
.publish-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 255, 136, 0.4);
    background: linear-gradient(135deg, var(--bright-accent), var(--secondary-accent));
}
        /* Сокращенный текст статьи */
        .article-excerpt {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 15px;
            font-size: 0.95rem;
            display: block;
            max-height: 4.8em;
            overflow: hidden;
            position: relative;
        }
        .article-excerpt::after {
            content: '...';
            position: absolute;
            bottom: 0;
            right: 0;
            padding-left: 10px;
            background: linear-gradient(to right, rgba(10, 10, 10, 0), var(--black) 50%);
            color: rgba(255, 255, 255, 0.8);
        }
        .article-date {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85rem;
            margin-bottom: 20px;
        }
        .article-author {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.95rem;
    margin-bottom: 15px;
    font-style: italic;
}
        /* Система лайков */
        .article-stats {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        .like-container {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }
        .like-icon {
            width: 20px;
            height: 20px;
            fill: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
        }
        .like-icon.liked {
            fill: var(--bright-accent);
            transform: scale(1.2);
        }
        .like-count {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        /* Кнопка удаления */
        .delete-btn {
            padding: 8px 15px;
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
            border: 1px solid rgba(255, 68, 68, 0.3);
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .delete-btn:hover {
            background: rgba(255, 68, 68, 0.3);
        }
        /* Модальное окно для полного текста статьи */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .modal {
            background: var(--dark-gray);
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            position: relative;
        }
        .modal h2 {
            color: var(--bright-accent);
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        .modal-content {
            color: var(--white);
            line-height: 1.8;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        .modal-meta {
            display: flex;
            justify-content: space-between;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .modal-hashtags {
            color: rgba(0, 255, 136, 0.8);
            font-size: 0.95rem;
            margin-bottom: 20px;
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--white);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 20px;
        }
        /* Statistics Section */
        .stats-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        .stats-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 30px;
            color: var(--white);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        .stat-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--bright-accent);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--bright-accent);
            margin-bottom: 10px;
        }
        .stat-label {
            font-size: 1.1rem;
            color: var(--white);
            font-weight: 500;
        }
        .popular-articles {
            margin-top: 40px;
        }
        .popular-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--white);
        }
        .popular-list {
            list-style: none;
        }
        .popular-item {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .popular-item:last-child {
            border-bottom: none;
        }
        .popular-title-text {
            color: var(--white);
            font-weight: 500;
            max-width: 70%;
        }
        .popular-views {
            background: rgba(0, 255, 136, 0.2);
            color: var(--bright-accent);
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        #authContainer {
    position: relative;
    z-index: 1002;
    margin-left: 12px;
    flex-shrink: 0;
}
        /* Responsive Design */
        @media (max-width: 768px) {
            main {
                margin-top: 80px;
                padding: 20px 0;
            }
            .page-title {
                font-size: 2rem;
            }
            .editor-section, .articles-section, .stats-section {
                padding: 25px;
            }
            .articles-grid {
                grid-template-columns: 1fr;
            }
            .editor-buttons {
                flex-direction: column;
            }
            .filters {
                justify-content: center;
            }
            /* Стили для бургер-меню */
            .burger-menu {
    display: flex;
    margin-left: 10px;
    margin-right: 10px;
}
            /* Header - стили как на YouTube */
            header {
                padding: 8px 12px;
                min-height: 56px;
            }
            .header-container {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0 15px;
                gap: 0;
                flex-wrap: nowrap;
            }
            /* Логотип в стиле YouTube */
/* Логотип в стиле YouTube */
.logo-container {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
    min-width: 0;
    position: relative; /* Добавляем position: relative */
    z-index: 1002; /* Добавляем z-index: 1002 для расположения поверх меню */
}
.logo-icon {
    width: 36px;
    height: 36px;
    flex-shrink: 0;
}
/* Уменьшаем размер названия компании для мобильных устройств */
.logo {
    font-size: 20px; /* Уменьшил размер шрифта */
    max-width: 70%; /* Увеличил максимальную ширину */
}
            /* Навигация - скрываем на маленьких экранах */
            .nav-links {
    position: fixed;
    top: 56px;
    left: 0;
    width: 100%;
    background: rgba(10, 10, 10, 0.98);
    backdrop-filter: blur(15px);
    padding: 20px 15px 80px; /* Добавили нижний отступ */
    flex-direction: column;
    gap: 15px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    transform: translateY(-100%);
    opacity: 0;
    transition: all 0.3s ease;
    z-index: 999;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    /* Главное: не перекрывать кнопку "Войти" */
    max-height: calc(100vh - 140px); /* Оставляем место снизу */
    overflow-y: auto;
}
            .nav-links.active {
                transform: translateY(0);
                opacity: 1;
                display: flex;
            }
            .nav-button {
                width: 100%;
                text-align: center;
                padding: 12px 15px;
                border-radius: 8px;
            }
           .user-avatar {
    position: relative;
    z-index: 1002; /* Должен быть выше z-index меню (1001) */
}
            .avatar-initial {
    font-size: 14px;
    font-weight: 600;
}
        }
        @media (max-width: 576px) {
            .container {
                padding: 0 15px;
            }
            .page-title {
                font-size: 1.8rem;
            }
            .editor-title, .articles-title, .stats-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
<!-- Header -->
<header>
    <div class="container header-container">
        <div class="logo-container" id="homeLink">
            <img class="logo-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" src="img/Pepsora logo.png">
        </img>
            <div class="logo">PEPSORA</div>
        </div>
        <!-- Кнопка бургера для мобильных устройств -->
        <div class="burger-menu" id="burgerMenu">
            <div class="burger-line"></div>
            <div class="burger-line"></div>
            <div class="burger-line"></div>
        </div>
        <!-- Навигация для десктопа -->
        <nav class="nav-links" id="navLinks">
            <button class="nav-button" data-target="editor">Создание статьи</button>
            <button class="nav-button" data-target="articles">Все статьи</button>
            <button class="nav-button" data-target="stats">Статистика</button>
        </nav>
        <!-- Контейнер для аватарки или кнопки входа -->
<div id="authContainer">
    <!-- Будет заполнен динамически: либо аватарка, либо кнопка "Войти" -->
</div>
    </div>
</header>
    <!-- Main Content -->
    <main>
        <div class="container">
            <h1 class="page-title">Платформа для обсуждений</h1>
            <!-- Article Editor -->
            <section class="editor-section" id="editorSection">
                <h2 class="editor-title">Создать новую статью</h2>
                <form class="editor-form" id="articleForm">
                    <select class="category-select" id="categorySelect" required>
                        <option value="">Выберите категорию</option>
                        <option value="freelance">Фриланс</option>
                        <option value="blogging">Блоггинг</option>
                        <option value="earnings">Заработок</option>
                        <option value="marketing">Маркетинг</option>
                        <option value="technology">Технологии</option>
                        <option value="social_media">Социальные сети</option>
                        <option value="personal_growth">Личностный рост</option>
                    </select>
                    <input type="text" id="titleInput" class="title-input" placeholder="Заголовок статьи" required>
                    <input type="text" id="hashtagsInput" class="hashtags-input" placeholder="Хэштеги (через запятую)">
                    <textarea id="contentEditor" class="content-editor" placeholder="Начните писать вашу статью здесь..." required></textarea>
                    <!-- Исправил загрузку изображений -->
                    <div class="image-upload" id="imageUploadContainer">
    <p>Нажмите, чтобы загрузить изображения (макс. 5) или перетащите их сюда</p>
    <input type="file" id="imageInput" accept="image/*" multiple>
    <div id="imagesPreviewContainer" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;"></div>
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM17 10C17 10.55 16.55 11 16 11H13V14C13 14.55 12.55 15 12 15C11.45 15 11 14.55 11 14V11H8C7.45 11 7 10.55 7 10C7 9.45 7.45 9 8 9H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V9H16C16.55 9 17 9.45 17 10Z" fill="rgba(255,255,255,0.7)"/>
    </svg>
</div>
                    <div class="editor-buttons">
    <button type="button" id="draftBtn" class="draft-btn">Добавить в черновик</button>
    <button type="submit" id="publishBtn" class="publish-btn">Опубликовать</button>
</div>
                </form>
            </section>
            <!-- Articles Management -->
            <section class="articles-section" id="articlesSection">
                <h2 class="articles-title">Статьи</h2>
                <div class="filters">
                    <button class="filter-btn active" data-filter="all">Все статьи</button>
                    <button class="filter-btn" data-filter="published">Опубликовано мной</button>
                    <button class="filter-btn" data-filter="draft">Черновики</button>
                </div>
                <div class="articles-grid" id="articlesGrid">
                    <!-- Статьи будут загружаться здесь из базы данных -->
                </div>
            </section>
            <!-- Statistics Section -->
            <section class="stats-section" id="statsSection">
                <h2 class="stats-title">Статистика платформы</h2>
                <div class="stats-grid" id="statsGrid">
                    <!-- Статистика будет загружаться здесь из базы данных -->
                </div>
                <div class="popular-articles">
                    <h3 class="popular-title">Самые популярные статьи</h3>
                    <ul class="popular-list" id="popularList">
                        <!-- Популярные статьи будут загружаться здесь из базы данных -->
                    </ul>
                </div>
            </section>
        </div>
    </main>
    <!-- Модальное окно для полного текста статьи -->
    <div class="modal-overlay" id="articleModal">
        <div class="modal">
            <button class="modal-close" id="modalClose">×</button>
            <h2 id="modalTitle"></h2>
            <div class="modal-meta">
                <span id="modalCategory"></span>
                <span id="modalDate"></span>
            </div>
            <div class="modal-hashtags" id="modalHashtags"></div>
            <div class="modal-content" id="modalContent"></div>
            <div class="article-stats" id="modalStats">
                <div class="like-container" id="modalLikeContainer">
                    <svg class="like-icon" id="modalLikeIcon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                    <span class="like-count" id="modalLikeCount">0</span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="delete-btn" id="modalDeleteBtn">Удалить</button>
            </div>
        </div>
    </div>
<!-- Модальное окно профиля автора -->
<div class="profile-modal-overlay" id="authorProfileModal">
    <div class="profile-modal">
        <button class="profile-modal-close" id="authorProfileModalClose">×</button>
        <div class="profile-modal-header">
            <div class="profile-modal-avatar">
                <span class="profile-modal-initial" id="authorProfileInitial">U</span>
            </div>
            <div>
                <h2 class="profile-modal-title" id="authorProfileName">Имя пользователя</h2>
            </div>
        </div>
        <div class="profile-modal-info">
            <h4>Информация о пользователе</h4>
            <p><strong>Статей:</strong> <span id="authorArticlesCount">0</span></p>
            <p><strong>Общее количество лайков:</strong> <span id="authorTotalLikes">0</span></p>
            <p id="authorBio" style="display: none;"><strong>О себе:</strong> <span></span></p>
        </div>
        <div class="profile-modal-stats">
            <div class="profile-stat">
                <div class="profile-stat-number" id="authorArticlesStat">0</div>
                <div class="profile-stat-label">Статей</div>
            </div>
            <div class="profile-stat">
                <div class="profile-stat-number" id="authorLikesStat">0</div>
                <div class="profile-stat-label">Лайков</div>
            </div>
        </div>
    </div>
</div>
    <script>
      // Инициализация базы данных
function initDatabase() {
    if (!sessionStorage.getItem('pepsoraDatabase')) {
        const database = {
            users: [],
            articles: [],
            nextArticleId: 1,
            nextUserId: 1
        };
        // Обновляем статистику пользователя
        updateUserData();
        sessionStorage.setItem('pepsoraDatabase', JSON.stringify(database));
    }
}
// Создание нового пользователя
function createUser(name, email, password) {
    const db = getDatabase();
    const newUser = {
        id: db.nextUserId++,
        name: name,
        email: email,
        password: password,
        avatarInitial: name.charAt(0).toUpperCase(),
        registrationDate: new Date().toISOString(),
        articlesCount: 0,
        likesCount: 0,
        viewsCount: 0,
        articleIds: []
    };
    db.users.push(newUser);
    saveDatabase(db);
    return newUser;
}
// Обновление статистики пользователя
function updateUserData() {
    const db = getDatabase();
    const currentUser = getCurrentUser();
    if (!currentUser) return;
    const userArticles = db.articles.filter(article => article.authorId === currentUser.id);
    currentUser.articlesCount = userArticles.length;
    currentUser.likesCount = userArticles.reduce((sum, article) => sum + article.likes, 0);
    currentUser.viewsCount = userArticles.reduce((sum, article) => sum + article.views, 0);
    currentUser.articleIds = userArticles.map(article => article.id);
    const userIndex = db.users.findIndex(user => user.id === currentUser.id);
    if (userIndex !== -1) {
        db.users[userIndex] = currentUser;
    }
    saveDatabase(db);
}
// Получение текущего пользователя
function getCurrentUser() {
    const currentUserData = sessionStorage.getItem('currentUser');
    if (!currentUserData) return null;

    try {
        const currentUser = JSON.parse(currentUserData);
        const db = getDatabase();
        return db.users.find(user => user.id === currentUser.id) || null;
    } catch (e) {
        console.warn('Ошибка при парсинге currentUser:', e);
        return null;
    }
}
        // Получение базы данных
        function getDatabase() {
            return JSON.parse(sessionStorage.getItem('pepsoraDatabase')) || { users: [], articles: [], nextArticleId: 1 };
        }
        // Сохранение базы данных
        function saveDatabase(database) {
            sessionStorage.setItem('pepsoraDatabase', JSON.stringify(database));
        }
       function createArticle(title, content, category, hashtags, status, imageUrls = []) {
    const db = getDatabase();
    const currentUser = getCurrentUser();
    const newArticle = {
        id: db.nextArticleId++,
        title: title,
        content: content,
        category: category,
        hashtags: hashtags,
        status: status,
        authorId: currentUser.id,
        date: new Date().toISOString(),
        views: 0,
        likes: 0,
        likedBy: [],
        imageUrls: Array.isArray(imageUrls) ? imageUrls : (imageUrls ? [imageUrls] : []) // совместимость
    };
    db.articles.push(newArticle);
    saveDatabase(db);
    updateUserData();
    return newArticle;
}
        // Получение статей пользователя
       function getUserArticles() {
    const currentUser = getCurrentUser();
    if (!currentUser) return [];
    const db = getDatabase();
    return db.articles.filter(article => article.authorId === currentUser.id);
}
        // Получение популярных статей (только опубликованные)
function getPopularArticles(limit = 3) {
    const db = getDatabase();
    return [...db.articles]
        .filter(article => article.status === 'published')
        .sort((a, b) => b.likes - a.likes) // Сортируем по лайкам (популярные вверху)
        .slice(0, limit);
}
        // Получение статистики
        function getStatistics() {
            const db = getDatabase();
            return {
                totalArticles: db.articles.filter(article => article.status === 'published').length,
                totalUsers: db.users.length,
                totalViews: db.articles.reduce((sum, article) => sum + article.views, 0),
                totalLikes: db.articles.reduce((sum, article) => sum + article.likes, 0)
            };
        }
        // Удаление статьи
function deleteArticle(articleId) {
    const db = getDatabase();
    const articleIndex = db.articles.findIndex(article => article.id === articleId);
    if (articleIndex !== -1) {
        db.articles.splice(articleIndex, 1);
        saveDatabase(db);
        // Обновляем статистику пользователя
        updateUserData();
        return true;
    }
    return false;
}
        // Поставить/убрать лайк
function toggleLike(articleId) {
    const db = getDatabase();
    const currentUser = getCurrentUser();
    const article = db.articles.find(article => article.id === articleId);
    if (!article) return false;
    if (!article.likedBy) {
        article.likedBy = [];
    }
    const userIndex = article.likedBy.indexOf(currentUser.id);
    if (userIndex === -1) {
        article.likedBy.push(currentUser.id);
        article.likes = article.likedBy.length;
    } else {
        article.likedBy.splice(userIndex, 1);
        article.likes = article.likedBy.length;
    }
    saveDatabase(db);
    // Обновляем статистику пользователя
    updateUserData();
    return true;
}
       // Функция для получения информации об авторе
function getAuthorInfo(authorId) {
    const db = getDatabase();
    const author = db.users.find(user => user.id === authorId);
    if (author) {
        return {
            id: author.id,
            name: author.name || author.username || "Автор неизвестен",
            initial: author.avatarInitial || author.avatar || (author.name || author.username || "Автор неизвестен").charAt(0).toUpperCase(),
            registrationDate: author.registrationDate || author.createdAt || new Date().toISOString(),
            role: author.role || "Автор",
            articlesCount: author.articlesCount || author.articleCount || 0,
            totalViews: author.viewsCount || 0,
            totalLikes: author.likesCount || 0,
            bio: author.bio || "Описание профиля отсутствует"
        };
    } else {
        // Если пользователь не найден в базе данных, создаем временный объект
        return {
            id: authorId,
            name: "Автор неизвестен",
            initial: "U",
            registrationDate: new Date().toISOString(),
            role: "Автор",
            articlesCount: 0,
            totalViews: 0,
            totalLikes: 0,
            bio: "Описание профиля отсутствует"
        };
    }
}
// Функция для отображения профиля автора
function showAuthorProfile(authorId) {
    const authorInfo = getAuthorInfo(authorId);
    const profileModal = document.getElementById('authorProfileModal');
    // Заполняем модальное окно данными автора
    document.getElementById('authorProfileInitial').textContent = authorInfo.initial;
    document.getElementById('authorProfileName').textContent = authorInfo.name;
    document.getElementById('authorArticlesCount').textContent = authorInfo.articlesCount;
    document.getElementById('authorTotalLikes').textContent = authorInfo.likesCount;
    document.getElementById('authorArticlesStat').textContent = authorInfo.articlesCount;
    document.getElementById('authorLikesStat').textContent = authorInfo.likesCount;
    // Добавляем описание профиля, если оно есть
    const bioElement = document.getElementById('authorBio');
    if (bioElement) {
        bioElement.textContent = authorInfo.bio || "Описание профиля отсутствует";
        bioElement.style.display = 'block';
    }
    // Показываем модальное окно
    profileModal.classList.add('active');
}
// Закрыть модальное окно профиля автора
document.getElementById('authorProfileModalClose').onclick = function() {
    document.getElementById('authorProfileModal').classList.remove('active');
};
// Закрыть модальное окно профиля автора при клике вне его
document.getElementById('authorProfileModal').onclick = function(e) {
    if (e.target === this) {
        this.classList.remove('active');
    }
};
   // Отображение статей с поддержкой общих и личных фильтров
function displayArticles(articles, filter = 'all') {
    const articlesGrid = document.getElementById('articlesGrid');
    articlesGrid.innerHTML = '';
    
    const db = getDatabase();
    const currentUser = getCurrentUser();
    const currentUserId = currentUser ? currentUser.id : 1;

    let filteredArticles = [];

    if (filter === 'all') {
        // Показываем ВСЕ опубликованные статьи (от всех пользователей)
        filteredArticles = db.articles.filter(article => article.status === 'published');
    } else if (filter === 'published') {
        // Только опубликованные мной
        filteredArticles = db.articles.filter(article => 
            article.authorId === currentUserId && article.status === 'published'
        );
    } else if (filter === 'draft') {
        // Только мои черновики
        filteredArticles = db.articles.filter(article => 
            article.authorId === currentUserId && article.status === 'draft'
        );
    }

    if (filteredArticles.length === 0) {
        let message = '';
        if (filter === 'all') {
            message = 'Нет опубликованных статей на платформе';
        } else if (filter === 'published') {
            message = 'У вас нет опубликованных статей';
        } else if (filter === 'draft') {
            message = 'У вас нет черновиков';
        }
        articlesGrid.innerHTML = `<p style="color: rgba(255, 255, 255, 0.7); text-align: center; padding: 40px;">${message}</p>`;
        return;
    }

    // Сортируем: новые сверху
    filteredArticles.sort((a, b) => new Date(b.date) - new Date(a.date));

    filteredArticles.forEach(article => {
        const articleCard = document.createElement('div');
        articleCard.className = 'article-card';
        articleCard.dataset.id = article.id;

        const formattedDate = new Date(article.date).toLocaleDateString('ru-RU', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        });

        const authorInfo = getAuthorInfo(article.authorId);
        const authorName = authorInfo.name || "Автор неизвестен";
        const authorInitial = authorInfo.initial || "U";

        const excerpt = article.content.length > 200 
            ? article.content.substring(0, 200) + '...' 
            : article.content;

        // Определяем, какие кнопки показывать
        let actionsHtml = '';
        if (article.authorId === currentUserId) {
            // Это моя статья — можно удалять и редактировать (если черновик)
            if (article.status === 'draft') {
                actionsHtml = `
                    <div style="display: flex; align-items: center; gap: 10px; margin-top: 15px;">
    <button class="edit-btn" data-article-id="${article.id}" title="Редактировать">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
        </svg>
    </button>
    <button class="delete-btn" data-article-id="${article.id}">Удалить</button>
</div>
                `;
            } else {
                actionsHtml = `
                    <button class="delete-btn" data-article-id="${article.id}">Удалить</button>
                `;
            }
        }
        // Если статья чужая — кнопок нет (только просмотр)

        articleCard.innerHTML = `
            <span class="article-status status-${article.status}">${article.status === 'published' ? 'Опубликовано' : 'Черновик'}</span>
            <h3 class="article-title">${article.title}</h3>
            <p class="article-category">Категория: ${article.category}</p>
            <p class="article-hashtags">${article.hashtags}</p>
            <p class="article-excerpt">${excerpt}</p>
            <p class="article-date">Дата: ${formattedDate}</p>
            <div class="article-stats">
                <div class="like-container" data-article-id="${article.id}">
                    <svg class="like-icon ${article.likedBy && article.likedBy.includes(currentUserId) ? 'liked' : ''}" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                    <span class="like-count">${article.likes}</span>
                </div>
            </div>
            ${actionsHtml}
            <div class="author-info" data-author-id="${article.authorId}">
                <div class="author-avatar">
                    <span class="author-initial">${authorInitial}</span>
                </div>
                <span class="author-name">${authorName}</span>
            </div>
        `;
        articlesGrid.appendChild(articleCard);
    });

    // Обработчики для карточек (открытие полного текста)
    document.querySelectorAll('.article-card').forEach(card => {
        card.addEventListener('click', function(e) {
            if (!e.target.closest('.delete-btn') && 
                !e.target.closest('.edit-btn') && 
                !e.target.closest('.author-info')) {
                const articleId = parseInt(this.dataset.id);
                showFullArticle(articleId);
            }
        });
    });

    // Обработчики для авторов
    document.querySelectorAll('.author-avatar, .author-name').forEach(el => {
        el.addEventListener('click', function(e) {
            e.stopPropagation();
            const authorId = parseInt(this.closest('.author-info').dataset.authorId);
            showAuthorProfile(authorId);
        });
    });

    // Лайки
    document.querySelectorAll('.like-container').forEach(container => {
        container.addEventListener('click', function(e) {
            e.stopPropagation();
            const articleId = parseInt(this.dataset.articleId);
            toggleLike(articleId);
            location.reload();
        });
    });

    // Удаление
    document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const articleId = parseInt(this.dataset.articleId);
            if (confirm('Удалить статью?')) {
                if (deleteArticle(articleId)) {
                    alert('Статья удалена');
                    location.reload();
                }
            }
        });
    });

    // Редактирование черновика
    document.querySelectorAll('.edit-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const articleId = parseInt(this.dataset.articleId);
            editDraftArticle(articleId);
        });
    });
}

function editDraftArticle(articleId) {
    const db = getDatabase();
    const article = db.articles.find(a => a.id === articleId);
    if (!article || article.status !== 'draft') {
        alert('Статья не найдена или уже опубликована');
        return;
    }

    document.getElementById('categorySelect').value = article.category;
    document.getElementById('titleInput').value = article.title;
    document.getElementById('hashtagsInput').value = article.hashtags;
    document.getElementById('contentEditor').value = article.content;

    // Загружаем изображения
    if (typeof window.loadImagesForEditing === 'function') {
        window.loadImagesForEditing(article.imageUrls || []);
    }

    sessionStorage.setItem('editingArticleId', articleId);

    const formSection = document.getElementById('editorSection');
    if (formSection) {
        const headerHeight = document.querySelector('header')?.offsetHeight || 80;
        const scrollToPosition = formSection.offsetTop - headerHeight;
        window.scrollTo({ top: scrollToPosition, behavior: 'smooth' });
    }
    alert('Черновик загружен в редактор. Внесите изменения и нажмите "Опубликовать" или "Добавить в черновик".');
}
// Публикация черновика
function publishDraftArticle(articleId) {
    if (confirm('Вы уверены, что хотите опубликовать этот черновик?')) {
        const db = getDatabase();
        const article = db.articles.find(a => a.id === articleId);
        if (!article || article.status !== 'draft') {
            alert('Статья не найдена или уже опубликована');
            return;
        }
        article.status = 'published';
        article.date = new Date().toISOString();
        saveDatabase(db);
        alert('Статья успешно опубликована!');
        location.reload();
    }
}

        // Отображение статистики
        function displayStatistics() {
            const stats = getStatistics();
            const statsGrid = document.getElementById('statsGrid');
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${stats.totalArticles}</div>
                    <div class="stat-label">Статей опубликовано</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${stats.totalUsers}</div>
                    <div class="stat-label">Активных пользователей</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${stats.totalViews}</div>
                    <div class="stat-label">Просмотров сегодня</div>
                </div>
            `;
        }
        // Отображение популярных статей
function displayPopularArticles() {
    const popularArticles = getPopularArticles(3);
    const popularList = document.getElementById('popularList');
    if (popularArticles.length === 0) {
        popularList.innerHTML = '<li style="padding: 20px; text-align: center; color: rgba(255, 255, 255, 0.7);">Нет популярных статей</li>';
        return;
    }
    popularList.innerHTML = '';
    popularArticles.forEach(article => {
        const li = document.createElement('li');
        li.className = 'popular-item';
        li.innerHTML = `
            <span class="popular-title-text">${article.title}</span>
            <span class="popular-views">${article.likes} лайков</span>
        `;
        popularList.appendChild(li);
    });
}
       // Показать полный текст статьи в модальном окне
function showFullArticle(articleId) {
    const db = getDatabase();
    const article = db.articles.find(a => a.id === articleId);
    if (!article) return;
    const modal = document.getElementById('articleModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const modalCategory = document.getElementById('modalCategory');
    const modalDate = document.getElementById('modalDate');
    const modalHashtags = document.getElementById('modalHashtags');
    const modalLikeIcon = document.getElementById('modalLikeIcon');
    const modalLikeCount = document.getElementById('modalLikeCount');
    const modalDeleteBtn = document.getElementById('modalDeleteBtn');
    // Заполняем модальное окно данными статьи
    modalTitle.textContent = article.title;
    modalCategory.textContent = `Категория: ${article.category}`;
    modalHashtags.textContent = article.hashtags;
    // Форматируем дату
    const formattedDate = new Date(article.date).toLocaleDateString('ru-RU', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
    });
    modalDate.textContent = formattedDate;
    // Очищаем контент
modalContent.innerHTML = '';

// Добавляем изображения
if (article.imageUrls && article.imageUrls.length > 0) {
    article.imageUrls.forEach(url => {
        const img = document.createElement('img');
        img.src = url;
        img.alt = 'Изображение статьи';
        img.style.maxWidth = '100%';
        img.style.borderRadius = '8px';
        img.style.marginBottom = '20px';
        img.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.3)';
        modalContent.appendChild(img);
    });
}

// Добавляем текст
const textContent = document.createElement('div');
textContent.textContent = article.content;
textContent.style.lineHeight = '1.8';
textContent.style.fontSize = '1.1rem';
textContent.style.color = 'var(--white)';
modalContent.appendChild(textContent);
    if (article.likedBy && article.likedBy.includes(1)) {
        modalLikeIcon.classList.add('liked');
    } else {
        modalLikeIcon.classList.remove('liked');
    }
    modalLikeCount.textContent = article.likes;
    // Получаем информацию об авторе и добавляем её в мета-информацию
    const authorInfo = getAuthorInfo(article.authorId);
    const authorElement = document.createElement('div');
    authorElement.innerHTML = `<strong>Автор:</strong> ${authorInfo.name || "Автор неизвестен"}`;
    authorElement.style.marginBottom = '10px';
    authorElement.style.color = 'rgba(255, 255, 255, 0.8)';
    // Вставляем информацию об авторе перед датой
    const modalMeta = document.querySelector('.modal-meta');
    if (modalMeta) {
        // Удаляем существующий элемент автора, если он есть
        const existingAuthor = modalMeta.querySelector('.article-author');
        if (existingAuthor) {
            existingAuthor.remove();
        }
        // Вставляем новый элемент автора
        modalMeta.insertBefore(authorElement, modalMeta.firstChild);
        authorElement.className = 'article-author';
    }
    // Обработчик для лайка в модальном окне
    document.getElementById('modalLikeContainer').onclick = function() {
        toggleLike(articleId);
        location.reload();
    };
    // Обработчик для удаления в модальном окне
    modalDeleteBtn.onclick = function() {
        if (confirm('Вы уверены, что хотите удалить эту статью?')) {
            if (deleteArticle(articleId)) {
                alert('Статья успешно удалена');
                location.reload();
            } else {
                alert('Ошибка при удалении статьи');
            }
        }
    };
    // Показываем модальное окно
    modal.classList.add('active');
}
        // Закрыть модальное окно
        document.getElementById('modalClose').onclick = function() {
            document.getElementById('articleModal').classList.remove('active');
        };
        // Закрыть модальное окно при клике вне его
        document.getElementById('articleModal').onclick = function(e) {
            if (e.target === this) {
                this.classList.remove('active');
            }
        };
       function setupForm() {
    const articleForm = document.getElementById('articleForm');
    const draftBtn = document.getElementById('draftBtn');
    const publishBtn = document.getElementById('publishBtn');
    const imageUploadContainer = document.getElementById('imageUploadContainer');
    const imageInput = document.getElementById('imageInput');
    const imagesPreviewContainer = document.getElementById('imagesPreviewContainer');

    // Хранилище для Data URL изображений
    let currentImageUrls = [];

    // Обновление превью
    function updatePreview() {
        imagesPreviewContainer.innerHTML = '';
        currentImageUrls.forEach((url, index) => {
            const item = document.createElement('div');
            item.className = 'image-preview-item';
            item.innerHTML = `
                <img src="${url}" alt="Изображение ${index + 1}">
                <button class="remove-image-btn" data-index="${index}">×</button>
            `;
            imagesPreviewContainer.appendChild(item);
        });

        // Обработчики удаления
        document.querySelectorAll('.remove-image-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                const index = parseInt(this.dataset.index);
                currentImageUrls.splice(index, 1);
                updatePreview();
            });
        });
    }

    // Загрузка изображений
    imageUploadContainer.addEventListener('click', () => {
        if (currentImageUrls.length < 5) {
            imageInput.click();
        }
    });

    imageInput.addEventListener('change', (e) => {
        if (e.target.files) {
            const files = Array.from(e.target.files);
            const remainingSlots = 5 - currentImageUrls.length;
            const filesToLoad = files.slice(0, remainingSlots);

            if (filesToLoad.length === 0) return;

            filesToLoad.forEach(file => {
                if (!file.type.startsWith('image/')) return;
                const reader = new FileReader();
                reader.onload = (e) => {
                    currentImageUrls.push(e.target.result);
                    updatePreview();
                };
                reader.readAsDataURL(file);
            });

            // Сбрасываем input, чтобы можно было загружать те же файлы снова
            imageInput.value = '';
        }
    });

    // Обработка публикации
    publishBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const title = document.getElementById('titleInput').value;
        const content = document.getElementById('contentEditor').value;
        const category = document.getElementById('categorySelect').value;
        const hashtags = document.getElementById('hashtagsInput').value;

        if (!title || !content || !category) {
            alert('Пожалуйста, заполните все обязательные поля');
            return;
        }

        const editingArticleId = sessionStorage.getItem('editingArticleId');
        if (editingArticleId) {
            const db = getDatabase();
            const article = db.articles.find(a => a.id === parseInt(editingArticleId));
            if (article) {
                article.title = title;
                article.content = content;
                article.category = category;
                article.hashtags = hashtags;
                article.imageUrls = [...currentImageUrls]; // обновляем массив
                article.status = 'published';
                article.date = new Date().toISOString();
                saveDatabase(db);
                sessionStorage.removeItem('editingArticleId');
                alert('Статья успешно опубликована!');
                articleForm.reset();
                currentImageUrls = [];
                updatePreview();
                loadUserData();
                return;
            }
        }

        createArticle(title, content, category, hashtags, 'published', currentImageUrls);
        alert('Статья успешно опубликована!');
        articleForm.reset();
        currentImageUrls = [];
        updatePreview();
        loadUserData();
    });

    // Обработка черновика
    draftBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const title = document.getElementById('titleInput').value;
        const content = document.getElementById('contentEditor').value;
        const category = document.getElementById('categorySelect').value;
        const hashtags = document.getElementById('hashtagsInput').value;

        if (!title || !content || !category) {
            alert('Пожалуйста, заполните все обязательные поля');
            return;
        }

        const editingArticleId = sessionStorage.getItem('editingArticleId');
        if (editingArticleId) {
            const db = getDatabase();
            const article = db.articles.find(a => a.id === parseInt(editingArticleId));
            if (article) {
                article.title = title;
                article.content = content;
                article.category = category;
                article.hashtags = hashtags;
                article.imageUrls = [...currentImageUrls];
                saveDatabase(db);
                sessionStorage.removeItem('editingArticleId');
                alert('Черновик успешно обновлён!');
                articleForm.reset();
                currentImageUrls = [];
                updatePreview();
                loadUserData();
                return;
            }
        }

        createArticle(title, content, category, hashtags, 'draft', currentImageUrls);
        alert('Статья сохранена в черновиках!');
        articleForm.reset();
        currentImageUrls = [];
        updatePreview();
        loadUserData();
    });

    // Функция для загрузки изображений при редактировании
    window.loadImagesForEditing = function(imageUrls) {
        currentImageUrls = imageUrls || [];
        updatePreview();
    };
}
        function setupFilters() {
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            const filter = this.dataset.filter;
            displayArticles(null, filter); // Передаём только фильтр
        });
    });
}
    function loadUserData() {
    const selectedArticleId = sessionStorage.getItem('selectedArticleId');
    if (selectedArticleId) {
        showFullArticle(parseInt(selectedArticleId));
        sessionStorage.removeItem('selectedArticleId');
    }

    const currentUser = getCurrentUser();
    const authContainer = document.getElementById('authContainer');

    if (!currentUser) {
        // Пользователь не авторизован — показываем кнопку "Войти"
        authContainer.innerHTML = `
            <button class="login-btn" id="loginBtn">Войти</button>
        `;
        document.getElementById('loginBtn').addEventListener('click', function(e) {
            e.stopPropagation();
            window.location.href = 'profile.html';
        });

        // Скрываем форму создания статьи
        const editorSection = document.getElementById('editorSection');
        editorSection.innerHTML = `
            <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.7);">
                <h2 class="editor-title">Требуется авторизация</h2>
                <p>Чтобы создавать статьи, войдите в свой аккаунт или зарегистрируйтесь.</p>
            </div>
        `;
    } else {
        // Пользователь авторизован — показываем аватарку
        authContainer.innerHTML = `
            <div id="authContainer"></div>
        `;
        document.getElementById('userAvatar').addEventListener('click', function(e) {
            e.stopPropagation();
            window.location.href = 'profile.html';
        });

        // Форма создания статьи остаётся видимой
        // (она уже есть в HTML, ничего не удаляем)
    }

    // Загружаем статьи (если пользователь не авторизован — будут только публичные в "Все статьи")
    const userArticles = getUserArticles();
    displayArticles(userArticles);
    displayStatistics();
    displayPopularArticles();
}
        // Инициализация страницы
        document.addEventListener('DOMContentLoaded', function() {
            initDatabase();
            setupForm();
            setupFilters();
            loadUserData();
            // Получаем элементы для навигации
const burgerMenu = document.getElementById('burgerMenu');
const navLinks = document.getElementById('navLinks');
const navButtons = document.querySelectorAll('.nav-button');
const homeLink = document.getElementById('homeLink');
const userAvatar = document.getElementById('userAvatar');
// Инициализация: добавляем active первой кнопке
if (navButtons.length > 0) {
    navButtons[0].classList.add('active');
}
// Обработчик для бургер-меню
if (burgerMenu && navLinks) {
    burgerMenu.addEventListener('click', function(e) {
        e.stopPropagation();
        navLinks.classList.toggle('active');
        const lines = this.querySelectorAll('.burger-line');
        if (navLinks.classList.contains('active')) {
            lines[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
            lines[1].style.opacity = '0';
            lines[2].style.transform = 'rotate(-45deg) translate(5px, -5px)';
        } else {
            lines[0].style.transform = 'rotate(0) translate(0, 0)';
            lines[1].style.opacity = '1';
            lines[2].style.transform = 'rotate(0) translate(0, 0)';
        }
    });
    
}
// Обработчики для навигационных кнопок
navButtons.forEach(button => {
    button.addEventListener('click', function(e) {
        e.stopPropagation(); // Добавляем stopPropagation для предотвращения всплытия
        e.preventDefault();
        // Убираем active у всех кнопок
        navButtons.forEach(btn => btn.classList.remove('active'));
        // Добавляем active текущей кнопке
        this.classList.add('active');
        // Закрываем меню на мобильных
        if (navLinks && navLinks.classList.contains('active')) {
            navLinks.classList.remove('active');
            const lines = burgerMenu.querySelectorAll('.burger-line');
            lines[0].style.transform = 'rotate(0) translate(0, 0)';
            lines[1].style.opacity = '1';
            lines[2].style.transform = 'rotate(0) translate(0, 0)';
        }
        // Прокрутка к соответствующей секции
        const targetId = this.getAttribute('data-target');
        let targetElement = null;
        if (targetId === 'editor') {
            targetElement = document.getElementById('editorSection');
        } else if (targetId === 'articles') {
            targetElement = document.getElementById('articlesSection');
        } else if (targetId === 'stats') {
            targetElement = document.getElementById('statsSection');
        }
        if (targetElement) {
            const headerHeight = document.querySelector('header')?.offsetHeight || 80;
            const scrollToPosition = targetElement.offsetTop - headerHeight;
            window.scrollTo({
                top: scrollToPosition,
                behavior: 'smooth'
            });
        }
    });
});
// Обработчик для логотипа (переход на главную страницу)
if (homeLink) {
    homeLink.addEventListener('click', function(e) {
        e.stopPropagation(); // Добавляем stopPropagation для предотвращения всплытия
        e.preventDefault();
        window.location.href = 'index.html';
    });
}
// Обработчик для аватарки (переход на страницу профиля)
if (userAvatar) {
    userAvatar.addEventListener('click', function(e) {
        e.stopPropagation(); // Добавляем stopPropagation для предотвращения всплытия
        e.preventDefault();
        window.location.href = 'profile.html';
    });
}
// Автоматическое обновление активной кнопки при прокрутке
window.addEventListener('scroll', function() {
    const scrollPosition = window.scrollY + 100;
    // Убираем active у всех кнопок
    navButtons.forEach(btn => btn.classList.remove('active'));
    // Определяем текущую секцию
    const sections = [
        { id: 'editor', element: document.getElementById('editorSection') },
        { id: 'articles', element: document.getElementById('articlesSection') },
        { id: 'stats', element: document.getElementById('statsSection') }
    ];
    for (let i = 0; i < sections.length; i++) {
        const section = sections[i];
        if (!section.element) continue;
        const sectionTop = section.element.offsetTop;
        const sectionHeight = section.element.offsetHeight;
        const sectionBottom = sectionTop + sectionHeight;
        if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
            const activeButton = document.querySelector(`.nav-button[data-target="${section.id}"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
            break;
        }
    }
});
// Закрытие меню при клике вне его
document.addEventListener('click', function(event) {
    if (navLinks && navLinks.classList.contains('active') && 
        !navLinks.contains(event.target) && 
        (!burgerMenu || !burgerMenu.contains(event.target)) &&
        (!homeLink || !homeLink.contains(event.target))) { // Добавляем проверку для логотипа
        navLinks.classList.remove('active');
        if (burgerMenu) {
            const lines = burgerMenu.querySelectorAll('.burger-line');
            lines[0].style.transform = 'rotate(0) translate(0, 0)';
            lines[1].style.opacity = '1';
            lines[2].style.transform = 'rotate(0) translate(0, 0)';
        }
    }
});
        });

    </script>
</body>
</html>